---
import type { CollectionEntry } from 'astro:content';

interface Props {
  digests: CollectionEntry<'digests'>[];
  currentDate: string;
}

const { digests, currentDate } = Astro.props;
---

{/* Desktop: vertical sidebar */}
<aside class="hidden lg:block w-52 shrink-0">
  <div class="sticky top-20">
    <h2 class="text-sm font-bold text-lobster-muted uppercase tracking-wide mb-3">Posts</h2>
    <nav class="space-y-1 max-h-[calc(100vh-8rem)] overflow-y-auto">
      {digests.map((digest) => (
        <a
          href={digest.data.date === currentDate ? '#' : `/digest/${digest.data.date}`}
          class:list={[
            'block text-sm py-1 px-2 rounded no-underline transition-colors',
            digest.data.date === currentDate
              ? 'text-lobster-accent bg-white/5 font-medium'
              : 'text-lobster-muted hover:text-lobster-text hover:bg-white/5',
          ]}
        >
          {digest.data.date}
        </a>
      ))}
    </nav>
  </div>
</aside>
